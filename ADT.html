<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADT Conceptual Debugger Challenge</title>
    <style>
        /* --- General Styling and Layout --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8; 
            color: #333;
            margin: 0;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background-color: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            width: 95%;
            max-width: 950px;
        }

        h1 {
            color: #b08800; /* Dark Gold/Mustard */
            text-align: center;
            border-bottom: 3px solid #b08800;
            padding-bottom: 8px;
            margin-bottom: 15px;
            font-size: 1.8em; 
        }
        
        /* --- Introduction and Task Area --- */
        #introBox {
            background-color: #fffacd; /* Lemon Chiffon */
            padding: 10px; 
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        #definition {
            font-size: 0.95em;
            color: #b08800; 
            margin: 0 0 5px 0; 
            padding: 3px 0;
            border-bottom: 1px dashed #ffd700;
        }

        #taskStatement {
            font-size: 1em; 
            font-weight: 600;
            color: #ff4500; /* Orange Red */
            margin: 0;
        }

        /* --- Game Area --- */
        #gameArea {
            padding: 20px;
            border: 2px solid #ccc;
            border-radius: 8px;
            background-color: #f7f7ff;
        }

        /* --- Status Bar --- */
        #currentStatus {
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            margin-bottom: 20px;
            background-color: #333;
            color: white;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* --- Debugger Board --- */
        #debuggerBoard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        #errorDescription {
            grid-column: 1 / 3;
            background-color: #f8d7da; /* Light Red */
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dc3545;
            color: #721c24;
            font-weight: bold;
            text-align: center;
        }
        
        .debug-panel {
            padding: 15px;
            border-radius: 6px;
            background-color: white;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        #specPanel h3 { color: #2e8b57; } /* Specification Green */
        #fixPanel h3 { color: #1e90ff; } /* Fix Blue */
        
        /* --- Fix Options --- */
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        .option-group label {
            display: block;
            padding: 10px 12px;
            border: 2px solid #1e90ff; /* Blue Border */
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 0.9em;
            background-color: #f0f8ff;
            font-weight: 500;
        }
        
        .option-group input[type="radio"] {
            margin-right: 10px;
        }
        
        .option-group input[type="radio"]:checked + label {
            background-color: #1e90ff;
            color: white;
            border-color: #0056b3;
        }


        /* --- Controls and Feedback --- */
        #feedback {
            margin-top: 15px;
            padding: 10px; 
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            min-height: 25px;
            font-size: 0.95em;
        }

        .action-controls button {
            padding: 10px 25px;
            background-color: #4b0082;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            margin: 0 5px;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>ADT Conceptual Task</h1>
        
        <div id="introBox">
            <h3 id="definition">An Abstract Data Type's is defined by WHAT it achieves (Specification), but executed by a sequence of physical code actions (Implementation). </h3>
            <p id="taskStatement">
                TASK: Analyze the operation's goal (Specification) and choose the correct code action needed to maintain the structure's integrity.
            </p>
        </div>

        <div id="gameArea">
            
            <div id="currentStatus">
                <span>ADT: <strong id="adtName">Queue (FIFO)</strong></span>
                <span>Implementation: <strong id="implName">Linked List</strong></span>
                <span>Operation: <strong id="operationName">DEQUEUE (Remove)</strong></span>
            </div>

            <div id="debuggerBoard">
                
                <div id="errorDescription">
                    ERROR: The last operation failed. The ADT's rule has been violated!
                </div>

                <div class="debug-panel" id="specPanel">
                    <h3>1. ADT Rule (Specification)</h3>
                    <p id="specRule">When performing **DEQUEUE**, the element that was inserted **first** must be removed.</p>
                </div>

                <div class="debug-panel" id="fixPanel">
                    <h3>2. Choose the Code Fix (Implementation)</h3>
                    <p>Which pointer manipulation corrects the ADT state?</p>
                    <div class="option-group" id="fixOptions">
                        </div>
                </div>

            </div>
            
            <div id="feedback" style="background-color: transparent;">
                Select the correct fix, then click Check.
            </div>
            
            <div class="action-controls">
                <button onclick="checkAnswer()" id="checkBtn">CHECK FIX</button>
                <button onclick="loadNextQuestion()" id="nextBtn" disabled>NEXT BUG</button>
            </div>

        </div>

    </div>

    <script>
        // --- Game Data ---
        const SCENARIOS = [
            {
                adt: "Queue (FIFO)", operation: "DEQUEUE", impl: "Linked List",
                specRule: "When performing DEQUEUE, the element that was inserted FIRST must be removed.",
                correctFix: "The HEAD pointer must move forward to the next node.",
                fixOptions: [
                    "The HEAD pointer must move forward to the next node.",
                    "The TAIL pointer must move backward to the previous node.",
                    "The element in the middle index must be deleted.",
                    "The HEAD pointer must be set to null."
                ]
            },
            {
                adt: "Stack (LIFO)", operation: "POP", impl: "Array",
                specRule: "When performing POP, the element that was inserted LAST must be removed.",
                correctFix: "The TOP index pointer must be decremented.",
                fixOptions: [
                    "The BOTTOM index pointer must be decremented.",
                    "The entire array must be shifted to the left.",
                    "The TOP index pointer must be decremented.",
                    "The array capacity must be doubled."
                ]
            },
            {
                adt: "Stack (LIFO)", operation: "PUSH", impl: "Linked List",
                specRule: "When performing PUSH, the new element must become the new LAST element inserted.",
                correctFix: "The new node must be inserted at the HEAD of the list.",
                fixOptions: [
                    "The new node must be inserted at the TAIL of the list.",
                    "The new node must be inserted at the HEAD of the list.",
                    "The size variable must be decreased by one.",
                    "The HEAD pointer and TAIL pointer must be swapped."
                ]
            }
        ];

        // --- Game State ---
        let currentQuestionIndex = 0;
        let score = 0;
        
        // --- DOM Elements ---
        const adtNameEl = document.getElementById('adtName');
        const implNameEl = document.getElementById('implName');
        const operationNameEl = document.getElementById('operationName');
        const specRuleEl = document.getElementById('specRule');
        const fixOptionsDiv = document.getElementById('fixOptions');
        const checkBtn = document.getElementById('checkBtn');
        const nextBtn = document.getElementById('nextBtn');
        const feedbackEl = document.getElementById('feedback');
        
        // --- Utility Functions ---

        function renderOptions(optionsArray, divElement, name, checkedValue = null) {
            divElement.innerHTML = '';
            shuffle(optionsArray);

            optionsArray.forEach((option, index) => {
                const radioId = `${name}-${index}`;
                const isChecked = option === checkedValue ? 'checked' : '';
                
                divElement.innerHTML += `
                    <div>
                        <input type="radio" id="${radioId}" name="${name}" value="${option}" ${isChecked}>
                        <label for="${radioId}">${option}</label>
                    </div>
                `;
            });
        }
        
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function getSelectedValue(name) {
            return document.querySelector(`input[name="${name}"]:checked`)?.value;
        }

        // --- Game Flow ---

        function loadNextQuestion() {
            if (currentQuestionIndex >= SCENARIOS.length) {
                endGame();
                return;
            }

            const q = SCENARIOS[currentQuestionIndex];
            
            // 1. Update Status & Rule
            adtNameEl.textContent = q.adt;
            implNameEl.textContent = q.impl;
            operationNameEl.textContent = q.operation;
            specRuleEl.innerHTML = q.specRule; // Use innerHTML to allow for bolding
            
            // 2. Render Options (The Fixes)
            renderOptions(q.fixOptions, fixOptionsDiv, 'fix_choice');

            // 3. Reset Controls and Feedback
            checkBtn.disabled = false;
            nextBtn.disabled = true;
            feedbackEl.style.backgroundColor = 'transparent';
            feedbackEl.textContent = `Question ${currentQuestionIndex + 1}: Find the code fix for this ADT operation.`;

            // Clear previous highlighting
            document.querySelectorAll('.option-group label').forEach(label => {
                label.style.backgroundColor = '#f0f8ff';
                label.style.color = '#333';
                label.style.borderColor = '#1e90ff';
            });
        }

        function checkAnswer() {
            const q = SCENARIOS[currentQuestionIndex];
            const selectedFix = getSelectedValue('fix_choice');

            if (!selectedFix) {
                feedbackEl.style.backgroundColor = '#f8d7da';
                feedbackEl.style.color = '#721c24';
                feedbackEl.innerHTML = 'Please select a pointer fix before checking.';
                return;
            }

            const isCorrect = selectedFix === q.correctFix;
            
            // --- Visual Feedback ---
            
            const correctLabel = document.querySelector(`input[value="${q.correctFix}"]`).parentNode;
            
            if (isCorrect) {
                score++;
                feedbackEl.style.backgroundColor = '#d4edda';
                feedbackEl.style.color = '#155724';
                feedbackEl.innerHTML = `CORRECT! The fix (${q.correctFix}) restores the ADT contract. Score: ${score} / ${currentQuestionIndex + 1}.`;
                
                correctLabel.style.backgroundColor = '#2e8b57'; // Dark Green for Correct
                correctLabel.style.color = 'white';
                correctLabel.style.borderColor = 'lime';

            } else {
                feedbackEl.style.backgroundColor = '#fff3cd';
                feedbackEl.style.color = '#856404';
                feedbackEl.innerHTML = `INCORRECT. The correct fix is highlighted in green. Score: ${score} / ${currentQuestionIndex + 1}.`;

                const selectedLabel = document.querySelector(`input[value="${selectedFix}"]`).parentNode;
                selectedLabel.style.backgroundColor = '#dc143c'; // Red for Incorrect
                selectedLabel.style.color = 'white';
                selectedLabel.style.borderColor = 'red';
                
                correctLabel.style.backgroundColor = '#2e8b57'; // Dark Green
                correctLabel.style.color = 'white';
                correctLabel.style.borderColor = 'lime';
            }

            checkBtn.disabled = true;
            nextBtn.disabled = false;
            currentQuestionIndex++; // Move to the next question index for loading
        }
        
        function endGame() {
            adtNameEl.textContent = "---";
            implNameEl.textContent = "---";
            operationNameEl.textContent = "---";
            
            specRuleEl.innerHTML = "Challenge Complete!";
            fixOptionsDiv.innerHTML = "Final Score: " + score + " / " + SCENARIOS.length;
            
            feedbackEl.style.backgroundColor = '#e6f7ff';
            feedbackEl.style.color = '#4b0082';
            feedbackEl.innerHTML = `CHALLENGE COMPLETE! Final Score: ${score} out of ${SCENARIOS.length}. Click Start New Game to try again.`;
            
            // Set up restart button
            checkBtn.style.display = 'none';
            nextBtn.textContent = 'START NEW GAME';
            nextBtn.onclick = initializeGame;
            nextBtn.disabled = false;
        }
        
        function initializeGame() {
            currentQuestionIndex = 0;
            score = 0;
            checkBtn.style.display = 'inline-block';
            nextBtn.textContent = 'NEXT BUG';
            nextBtn.onclick = loadNextQuestion;
            loadNextQuestion();
        }

        // --- Initial Setup ---
        document.addEventListener('DOMContentLoaded', initializeGame);

    </script>
</body>
</html>